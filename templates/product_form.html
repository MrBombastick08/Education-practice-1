{% extends "base.html" %}

{% block title %}Комфорт - {{ 'Редактирование' if product else 'Добавление' }} продукции{% endblock %}

{% block content %}
    <h1 class="page-title">{{ 'Редактирование' if product else 'Добавление' }} продукции</h1>
    
    <a href="{{ url_for('products') }}" class="btn btn-back">Назад к списку</a>
    
    <form method="POST" class="product-form">
        {{ form.hidden_tag() }}
        
        <div class="form-group">
            {{ form.article.label }}
            {{ form.article(class="form-control", value=product.article if product else '') }}
            {% if form.article.errors %}
                <div class="alert alert-danger">
                    {% for error in form.article.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.product_type_id.label }}
            {{ form.product_type_id(class="form-control", value=product.product_type_id if product else '') }}
            {% if form.product_type_id.errors %}
                <div class="alert alert-danger">
                    {% for error in form.product_type_id.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.name.label }}
            {{ form.name(class="form-control", value=product.name if product else '') }}
            {% if form.name.errors %}
                <div class="alert alert-danger">
                    {% for error in form.name.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.description.label }}
            {{ form.description(class="form-control", value=product.description if product else '', rows=3) }}
        </div>
        
        <div class="form-group">
            {{ form.min_cost_for_partner.label }}
            {{ form.min_cost_for_partner(class="form-control", value=product.min_cost_for_partner if product else '', placeholder="Введите стоимость в рублях") }}
            {% if form.min_cost_for_partner.errors %}
                <div class="alert alert-danger">
                    {% for error in form.min_cost_for_partner.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.main_material_id.label }}
            {{ form.main_material_id(class="form-control", value=product.main_material_id if product else '') }}
            {% if form.main_material_id.errors %}
                <div class="alert alert-danger">
                    {% for error in form.main_material_id.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
        
        <div class="form-group">
            {{ form.parameter1.label }} (размер/площадь)
            {{ form.parameter1(class="form-control", value=product.parameter1 if product else '', placeholder="Введите положительное число") }}
        </div>
        
        <div class="form-group">
            {{ form.parameter2.label }} (другой размер)
            {{ form.parameter2(class="form-control", value=product.parameter2 if product else '', placeholder="Введите положительное число") }}
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn">{{ 'Сохранить изменения' if product else 'Добавить продукт' }}</button>
            <a href="{{ url_for('products') }}" class="btn btn-back">Отмена</a>
        </div>
    </form>
{% endblock %}